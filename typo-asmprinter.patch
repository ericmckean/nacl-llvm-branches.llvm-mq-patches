# HG changeset patch
# Parent 1f44bd430e5c3aa99c5554c67175d1aee494a653
# User Jason Kim <jasonwkim@google.com>
more typos on AsmPrinter.cpp

diff -r 1f44bd430e5c lib/CodeGen/AsmPrinter/AsmPrinter.cpp
--- a/lib/CodeGen/AsmPrinter/AsmPrinter.cpp	Thu Aug 11 13:34:27 2011 -0700
+++ b/lib/CodeGen/AsmPrinter/AsmPrinter.cpp	Thu Aug 11 13:40:23 2011 -0700
@@ -1957,7 +1957,8 @@
 
 // CheckIsMIFallThrough -
 // This is a helper routine for isBlockOnlyReachableByFallthough
-static bool CheckIsMIFallThrough(MachineBasicBlock::iterator II) {
+static bool CheckIsMIFallThrough(MachineBasicBlock::iterator II,
+                                 const MachineBasicBlock *MBB) {
   MachineInstr &MI = *II;
   // If it is not a simple branch, we are in a table somewhere.
   if (!MI.getDesc().isBranch() || MI.getDesc().isIndirectBranch())
@@ -2009,11 +2010,11 @@
     // determine whether the block falls through to the next one.
     // However, if the last instruction is BUNDLE_UNLOCK, then we have
     // to look at the one before it instead.
-    MachineBasicBlock::const_iterator MBBI = II;
-    if (LastInst.getOpcode() == TargetOpcode::BUNDLE_UNLOCK) {
+    MachineBasicBlock::iterator MBBI = II;
+    if ((*MBBI).getOpcode() == TargetOpcode::BUNDLE_UNLOCK) {
       --MBBI;
     }
-    if (!CheckIsMIFallThrough(MBBI))
+    if (!CheckIsMIFallThrough(MBBI, MBB))
       return false;
     // @LOCALMOD-END
   }
