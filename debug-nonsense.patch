# HG changeset patch
# Parent d962fb54a7a507a76008ded700a2280022f5225b
# User Jason Kim <jasonwkim@google.com>
debug nonsense


diff -r d962fb54a7a5 -r 0961665cce75 lib/VMCore/Instructions.cpp
--- a/lib/VMCore/Instructions.cpp	Sat Aug 13 16:03:58 2011 -0700
+++ b/lib/VMCore/Instructions.cpp	Sun Aug 14 14:05:53 2011 -0700
@@ -427,7 +427,7 @@
 //===----------------------------------------------------------------------===//
 //                        InvokeInst Implementation
 //===----------------------------------------------------------------------===//
-
+extern "C" int printf(const char *, ...);
 void InvokeInst::init(Value *Fn, BasicBlock *IfNormal, BasicBlock *IfException,
                       ArrayRef<Value *> Args, const Twine &NameStr) {
   assert(NumOperands == 3 + Args.size() && "NumOperands not set up?");
@@ -443,10 +443,15 @@
           (FTy->isVarArg() && Args.size() > FTy->getNumParams())) &&
          "Invoking a function with bad signature");
 
-  for (unsigned i = 0, e = Args.size(); i != e; i++)
-    assert((i >= FTy->getNumParams() || 
-            FTy->getParamType(i) == Args[i]->getType()) &&
-           "Invoking a function with a bad signature!");
+  for (unsigned i = 0, e = Args.size(); i != e; i++) {
+    if (!(i >= FTy->getNumParams() ||
+           FTy->getParamType(i) == Args[i]->getType())) {
+      printf("Param %d/%d mismatch %p %p\n", i,
+             FTy->getNumParams(), FTy->getParamType(i), Args[i]->getType());
+      printf("pid %d\n", getpid());
+      sleep(30);
+    }
+  }
 #endif
 
   std::copy(Args.begin(), Args.end(), op_begin());
