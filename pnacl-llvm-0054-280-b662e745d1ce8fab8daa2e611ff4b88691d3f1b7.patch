# HG changeset patch
# User David Meyer <pdox@google.com>
# Date 1310627309 25200
# Branch pnacl-sfi
# Node ID b662e745d1ce8fab8daa2e611ff4b88691d3f1b7
# Parent 7df43928346dcaba0322f9c0450c133ffbbf5107
Give libLTO a soname

 From pnacl-llvm-0054-280-b662e745d1ce8fab8daa2e611ff4b88691d3f1b7.patch

diff -r 7df43928346d llvm-trunk/tools/lto/Makefile
--- a/llvm-trunk/tools/lto/Makefile	Tue Jul 12 23:30:53 2011 -0700
+++ b/llvm-trunk/tools/lto/Makefile	Thu Jul 14 16:27:19 2011 -0700
@@ -56,3 +56,9 @@
                             -Wl,"@executable_path/../lib/lib$(LIBRARYNAME)$(SHLIBEXT)"
     endif
 endif
+
+#@ LOCALMOD-BEGIN
+# This is to fix an upstream bug. It is in the process of being upstreamed.
+# This line can be removed after it has been fixed upstream and we've merged.
+LLVMLibsOptions := $(LLVMLibsOptions) -Wl,-soname=$(SharedPrefix)LTO$(SHLIBEXT)
+#@ LOCALMOD-END
