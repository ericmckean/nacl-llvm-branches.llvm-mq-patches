# HG changeset patch
# Parent 5cf8961ccb737ab301c5816f7d1fee52f6b2c3cc
# User Ivan Krasin <krasin@chromium.org>
llvm/lib/Support/MemoryBuffer.cpp: revert SRPC file access.
Review URL: http://codereview.chromium.org/7483010/
BUG=http://code.google.com/p/nativeclient/issues/detail?id=1810

diff -r 5cf8961ccb73 tools/llc/llc.cpp
--- a/tools/llc/llc.cpp	Tue Aug 09 16:42:06 2011 -0700
+++ b/tools/llc/llc.cpp	Tue Aug 09 16:42:07 2011 -0700
@@ -274,7 +274,7 @@
   FOS.flush();
   ROS.flush();
 
-#if defined(__native_client__)
+#if defined(__native_client__) && defined(NACL_SRPC)
   NaClOutputStringToFile(filename, s);
 #else
   std::string error;
